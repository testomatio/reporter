Testomat functions gives you more flexibility in reporting and make your reports more powerful.

Functions can be used as ESM or CommonJS module. Use `require` instead of `import` in CommonJS.

```js
// inside TypeScript or JavaScript ESM
import { artifact, log, meta } from '@testomatio/reporter';

// inside CommonJS
const { artifact, log, meta } = require('@testomatio/reporter');
```

### Usage example

```javascript
import { artifact, log, meta } from '@testomatio/reporter';

test('my test', async () => {
  meta('ISSUE', 'MY-123');
  await page.login();
  log`I was logged in with user ${user}`;
  artifact(await saveScreenshot());
  assert(something);
});
```

After you import and invoke `testomat`, autocompletion will help you to find the right function.

### Available functions

- [artifact](#artifact)
- [log](#log)
- [step](#step)
- [meta (key:value)](#meta)
- [label](#label)

### Artifact

Adds file to the test report (text, image, video, etc.)

```javascript
import { artifact } from '@testomatio/reporter';

test('my test', async () => {
  const pathToFile = await saveScreenshot();
  artifact(pathToFile);
});
```

> Artifacts, generated by testrunners (like screenshots/videos by Playwright) are uploaded automatically, you don't need to add them manually using artifact function. Just setup [S3 bucket](./artifacts.md).

### Log

Similar to [step](#step) function, intended to log any additional info to the test report (including text, arrays, complex objects).

##### Usage examples:

```javascript
import { log } from '@testomatio/reporter';

test('my test', async () => {
  log('your message');
  log(`your message ${variable}`);
  log('your message', variable1, variable2);
});
```

```javascript
import { log } from '@testomatio/reporter';

test('Your test @T12345678', async () => {
  await page.login(user);

  log`I was logged in with user ${user}`;
  assert(loggedIn);

  log`I was logged in with user ${user}`; // < shorter syntax
});
```

### Step

Adds step to the test report. Step is a human-readable description of the test action. It is used to describe the test flow. This function is similar to [log](#log) function, but looks differently in the report.

```javascript
import { step } from '@testomatio/reporter';

describe('Your suite @S12345678', () => {
  test('Your test @T12345678', async () => {
    await page.login();
    step`Login successful`;
    assert(something);
  });
});
```

### Meta

Meta information is a key:value pair(s), which is used to add additional information to the test report. E.g. browser, environment, etc.

```js
import { meta } from '@testomatio/reporter';

test('my test', () => {
  // use it inside tests as key, value
  meta('browser', 'chrome');

  // or use it as an object
  meta({
    browser: 'chrome',
    server: 'staging',
  });
});
```

Or in CommonJS style:

```javascript
const { meta } = require('@testomatio/reporter');

test('Your test @T12345678', async () => {
  await page.login();
  testomat.meta({
    browser: 'chrome',
    testType: 'smoke',
  });
  assert(something);
});
```

## label

Adds a label to the reported test. Unlike `meta` label will be persisted to the test case itself, not just to reported run. Label should exst in Testomat.io to be added. You can pass also label value, if label was created as a custom field

```javascript
import { label } from '@testomatio/reporter';

describe('Your suite', () => {
  test('I can login', async () => {
    label('Area', 'Auth')
    label('Severity', 'Auth')
    label('Browser')
    await page.login();
  });
});
```

---

Supported frameworks:

- 游릭 CodeceptJS
- 游릭 Cucumber
- 游릭 Jest
- 游릭 Mocha
- 游릭 Playwright (optional, use native functionality)
- 游릭 WDIO (everything, except artifacts)
